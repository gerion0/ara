/**
 * @defgroup apps Applications
 * @brief The applications...
 */

/**
 * @file
 * @ingroup apps
 * @brief Just a simple test application
 */
#include "autosar/os.h"
#include "test/test.h"
#include "machine.h"


#if TRACE_JSON
{
  "vertices": {
    "0": 3,
    "1": 2,
    "2": 2,
    "3": 3,
    "4": 3,
    "5": 2,
    "6": 2,
    "7": 3,
    "8": 3,
    "9": 3,
    "10": 3,
    "11": 3,
    "12": 3,
    "13": 3,
    "14": 3,
    "15": 3,
    "16": 3,
    "17": 3,
    "18": 3,
    "19": 3,
    "20": 3,
    "21": 3,
    "22": 3,
    "23": 3,
    "24": 3,
    "25": 3,
    "26": 3,
    "27": 3,
    "28": 3,
    "29": 3,
    "30": 3,
    "31": 3,
    "32": 3,
    "33": 3,
    "34": 3,
    "35": 3,
    "36": 3,
    "37": 3,
    "38": 3,
    "39": 3,
    "40": 3,
    "41": 3,
    "42": 3,
    "43": 3,
    "44": 3,
    "45": 3,
    "46": 3,
    "47": 3,
    "48": 3,
    "49": 3,
    "50": 3,
    "51": 3,
    "52": 3,
    "53": 3,
    "54": 3,
    "55": 3,
    "56": 3,
    "57": 3,
    "58": 3,
    "59": 3,
    "60": 3,
    "61": 3,
    "62": 3,
    "63": 3,
    "64": 3,
    "65": 3,
    "66": 3,
    "67": 3,
    "68": 3,
    "69": 3,
    "70": 3,
    "71": 3,
    "72": 3
  },
  "edges": [
    [
      "0",
      "1"
    ],
    [
      "0",
      "1"
    ],
    [
      "0",
      "3"
    ],
    [
      "0",
      "5"
    ],
    [
      "0",
      "11"
    ],
    [
      "0",
      "15"
    ],
    [
      "0",
      "57"
    ],
    [
      "0",
      "59"
    ],
    [
      "1",
      "2"
    ],
    [
      "2",
      "3"
    ],
    [
      "2",
      "5"
    ],
    [
      "3",
      "4"
    ],
    [
      "4",
      "7"
    ],
    [
      "4",
      "7"
    ],
    [
      "4",
      "5"
    ],
    [
      "4",
      "5"
    ],
    [
      "4",
      "9"
    ],
    [
      "4",
      "13"
    ],
    [
      "5",
      "6"
    ],
    [
      "6",
      "9"
    ],
    [
      "6",
      "11"
    ],
    [
      "6",
      "13"
    ],
    [
      "6",
      "15"
    ],
    [
      "6",
      "57"
    ],
    [
      "6",
      "59"
    ],
    [
      "6",
      "61"
    ],
    [
      "6",
      "63"
    ],
    [
      "6",
      "65"
    ],
    [
      "6",
      "67"
    ],
    [
      "7",
      "8"
    ],
    [
      "8",
      "5"
    ],
    [
      "8",
      "5"
    ],
    [
      "8",
      "61"
    ],
    [
      "8",
      "63"
    ],
    [
      "8",
      "65"
    ],
    [
      "8",
      "67"
    ],
    [
      "9",
      "10"
    ],
    [
      "10",
      "17"
    ],
    [
      "10",
      "17"
    ],
    [
      "11",
      "12"
    ],
    [
      "12",
      "19"
    ],
    [
      "12",
      "19"
    ],
    [
      "12",
      "21"
    ],
    [
      "12",
      "21"
    ],
    [
      "13",
      "14"
    ],
    [
      "14",
      "17"
    ],
    [
      "14",
      "17"
    ],
    [
      "14",
      "23"
    ],
    [
      "14",
      "23"
    ],
    [
      "15",
      "16"
    ],
    [
      "16",
      "19"
    ],
    [
      "16",
      "19"
    ],
    [
      "16",
      "25"
    ],
    [
      "16",
      "25"
    ],
    [
      "16",
      "27"
    ],
    [
      "16",
      "27"
    ],
    [
      "16",
      "21"
    ],
    [
      "16",
      "21"
    ],
    [
      "17",
      "18"
    ],
    [
      "18",
      "29"
    ],
    [
      "18",
      "29"
    ],
    [
      "18",
      "31"
    ],
    [
      "18",
      "31"
    ],
    [
      "18",
      "66"
    ],
    [
      "19",
      "20"
    ],
    [
      "20",
      "33"
    ],
    [
      "20",
      "33"
    ],
    [
      "20",
      "35"
    ],
    [
      "20",
      "35"
    ],
    [
      "21",
      "22"
    ],
    [
      "22",
      "37"
    ],
    [
      "22",
      "37"
    ],
    [
      "23",
      "24"
    ],
    [
      "24",
      "39"
    ],
    [
      "24",
      "39"
    ],
    [
      "24",
      "41"
    ],
    [
      "24",
      "41"
    ],
    [
      "24",
      "29"
    ],
    [
      "24",
      "29"
    ],
    [
      "24",
      "31"
    ],
    [
      "24",
      "31"
    ],
    [
      "24",
      "68"
    ],
    [
      "25",
      "26"
    ],
    [
      "26",
      "43"
    ],
    [
      "26",
      "43"
    ],
    [
      "26",
      "33"
    ],
    [
      "26",
      "33"
    ],
    [
      "26",
      "45"
    ],
    [
      "26",
      "45"
    ],
    [
      "26",
      "35"
    ],
    [
      "26",
      "35"
    ],
    [
      "27",
      "28"
    ],
    [
      "28",
      "47"
    ],
    [
      "28",
      "47"
    ],
    [
      "28",
      "37"
    ],
    [
      "28",
      "37"
    ],
    [
      "29",
      "30"
    ],
    [
      "30",
      "52"
    ],
    [
      "31",
      "32"
    ],
    [
      "33",
      "34"
    ],
    [
      "34",
      "49"
    ],
    [
      "34",
      "49"
    ],
    [
      "35",
      "36"
    ],
    [
      "36",
      "49"
    ],
    [
      "36",
      "49"
    ],
    [
      "36",
      "51"
    ],
    [
      "36",
      "51"
    ],
    [
      "36",
      "38"
    ],
    [
      "37",
      "38"
    ],
    [
      "38",
      "49"
    ],
    [
      "38",
      "51"
    ],
    [
      "38",
      "49"
    ],
    [
      "38",
      "51"
    ],
    [
      "39",
      "40"
    ],
    [
      "41",
      "42"
    ],
    [
      "42",
      "56"
    ],
    [
      "43",
      "44"
    ],
    [
      "44",
      "51"
    ],
    [
      "44",
      "51"
    ],
    [
      "44",
      "49"
    ],
    [
      "44",
      "49"
    ],
    [
      "44",
      "53"
    ],
    [
      "44",
      "53"
    ],
    [
      "44",
      "55"
    ],
    [
      "44",
      "55"
    ],
    [
      "44",
      "48"
    ],
    [
      "45",
      "46"
    ],
    [
      "46",
      "53"
    ],
    [
      "46",
      "53"
    ],
    [
      "46",
      "49"
    ],
    [
      "46",
      "49"
    ],
    [
      "47",
      "48"
    ],
    [
      "48",
      "51"
    ],
    [
      "48",
      "49"
    ],
    [
      "48",
      "53"
    ],
    [
      "48",
      "55"
    ],
    [
      "48",
      "51"
    ],
    [
      "48",
      "49"
    ],
    [
      "48",
      "53"
    ],
    [
      "48",
      "55"
    ],
    [
      "49",
      "50"
    ],
    [
      "51",
      "52"
    ],
    [
      "53",
      "54"
    ],
    [
      "55",
      "56"
    ],
    [
      "57",
      "58"
    ],
    [
      "58",
      "69"
    ],
    [
      "58",
      "69"
    ],
    [
      "58",
      "71"
    ],
    [
      "58",
      "71"
    ],
    [
      "58",
      "9"
    ],
    [
      "58",
      "9"
    ],
    [
      "58",
      "13"
    ],
    [
      "58",
      "13"
    ],
    [
      "59",
      "60"
    ],
    [
      "60",
      "71"
    ],
    [
      "60",
      "71"
    ],
    [
      "60",
      "9"
    ],
    [
      "60",
      "9"
    ],
    [
      "61",
      "62"
    ],
    [
      "62",
      "31"
    ],
    [
      "62",
      "31"
    ],
    [
      "63",
      "64"
    ],
    [
      "64",
      "31"
    ],
    [
      "64",
      "31"
    ],
    [
      "64",
      "39"
    ],
    [
      "64",
      "39"
    ],
    [
      "65",
      "66"
    ],
    [
      "66",
      "29"
    ],
    [
      "66",
      "31"
    ],
    [
      "66",
      "29"
    ],
    [
      "66",
      "31"
    ],
    [
      "67",
      "68"
    ],
    [
      "68",
      "39"
    ],
    [
      "68",
      "41"
    ],
    [
      "68",
      "29"
    ],
    [
      "68",
      "31"
    ],
    [
      "68",
      "39"
    ],
    [
      "68",
      "41"
    ],
    [
      "68",
      "29"
    ],
    [
      "68",
      "31"
    ],
    [
      "69",
      "70"
    ],
    [
      "70",
      "61"
    ],
    [
      "70",
      "61"
    ],
    [
      "70",
      "67"
    ],
    [
      "70",
      "67"
    ],
    [
      "70",
      "63"
    ],
    [
      "70",
      "63"
    ],
    [
      "70",
      "65"
    ],
    [
      "70",
      "65"
    ],
    [
      "71",
      "72"
    ],
    [
      "72",
      "65"
    ],
    [
      "72",
      "65"
    ],
    [
      "72",
      "61"
    ],
    [
      "72",
      "61"
    ]
  ]
}
#endif //TRACE_JSON

#if LOCKS_JSON
{"no_timing": {"spin_states": {"S1": 0, "S2": 0}}}
#endif //LOCKS_JSON





DeclareTask(T01);
DeclareTask(T11);
DeclareTask(T21);
DeclareSpinlock(S1);
DeclareSpinlock(S2);

TEST_MAKE_OS_MAIN( StartOS(0) )

TASK(T01) {
	ActivateTask(T11);
	GetSpinlock(S1);
	ReleaseSpinlock(S1);
	TerminateTask();
}

TASK(T11) {
	ActivateTask(T21);
	TerminateTask();
}

TASK(T21) {
	GetSpinlock(S1);
	ReleaseSpinlock(S1);
	TerminateTask();
}

